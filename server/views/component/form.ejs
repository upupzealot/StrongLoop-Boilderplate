<% function formInput (item) { %>
  <div class="form-group">
    <% if(item.label) { %>
      <label><%- item.label %></label>
    <% } %>
    <input name="<%- item.name %>" type="<%- item.type %>" class="form-control">
  </div>
<% } %>

<% function submitBtn (btn) { %>
  <button name="submit" class="btn btn-default <% if(btn.position === 'right'){ %>pull-right<% } %>">
    <%- btn.text %>
  </button>
<% } %>

<div id = "<%- id %>" class="clearfix">
  <% items.forEach(function(item) { %>
    <% formInput(item); %>
  <% }); %>
  <% submitBtn(submit); %>
</div>

<script type="text/javascript">
$(function() {
  var $form = $('#<%- id %>');

  var form = {};
  var $item = null;
  <% function formInputBindEvent (item) { %>
    $item = $form.find('[name=<%- item.name %>]');
    $item.on('keyup', function() {
      var $this = $(this);
      form['<%- item.name %>'] = $this.val();
    });
  <% } %>
  <% items.forEach(function(item) { %>
    <% formInputBindEvent(item); %>
  <% }); %>

  var $submit_btn = $form.find('[name=submit]');
  $submit_btn.on('click', function() {
    console.log(form);
  });
});
</script>
